<div class="page-wrapper">
  <div class="profile-container">
    <div class="header">
      <!-- Imagem de perfil clicável -->
      <img 
        [src]="selectedProfileImage" 
        alt="Foto de perfil" 
        class="profile-pic" 
        (click)="openModal()" 
      />
      
      <div class="user-info">
        <h2>{{ user?.login }}</h2>
        <p>Nascido em: {{ user?.dateOfBirth | date:'longDate' }}</p>
      </div>
    </div>

    <!-- Seção de estatísticas (estilo Instagram) -->
    <div class="stats-section">
      <div class="stat-item">
        <span class="stat-number">{{ posts.length }}</span>
        <span class="stat-label">posts</span>
      </div>
      <div class="stat-item">
        <span class="stat-number">{{ followers || 0 }}</span>
        <span class="stat-label">seguidores</span>
      </div>
      <div class="stat-item">
        <span class="stat-number">{{ following || 0 }}</span>
        <span class="stat-label">seguindo</span>
      </div>
    </div>

    <!-- Seção de posts no formato grid -->
    <div class="posts-section">
      <div *ngIf="posts.length > 0; else noPosts" class="posts-grid">
        <!-- Post com mídia (imagem ou vídeo) -->
        <div *ngFor="let post of posts" class="grid-item" (click)="navigateToFullPost(post.id)">
          <!-- Indica se é foto ou vídeo com um ícone -->
          <div class="media-type-indicator" *ngIf="post.videoUrl">
            <i class="video-icon">▶</i>
          </div>
          
          <!-- Post com mídia (foto ou vídeo) -->
          <div *ngIf="post.imageUrl || post.videoUrl" class="grid-media">
            <img *ngIf="post.imageUrl" [src]="post.imageUrl" alt="Post" class="grid-image" />
            <video
              *ngIf="post.videoUrl && !post.imageUrl"
              class="grid-image"
              [src]="post.videoUrl"
              muted
              playsinline
              preload="metadata"
            ></video>
          </div>
          
          <!-- Post somente texto (mostra um preview) -->
          <div *ngIf="!post.imageUrl && !post.videoUrl" class="text-post-preview">
            <p class="text-content-preview">{{ post.content | slice:0:50 }}{{ post.content.length > 50 ? '...' : '' }}</p>
          </div>
        </div>
      </div>
      <ng-template #noPosts>
        <div class="empty-state">
          <p>Você ainda não postou nada. 
            <a routerLink="../../user/create-post" class="create-post-link">Poste algo</a>
          </p>
        </div>
      </ng-template>
    </div>
  </div>
</div>

<!-- Modal de seleção de imagem -->
<div class="modal-backdrop" *ngIf="isModalOpen" (click)="closeModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <h3>Escolha sua foto de perfil</h3>
    
    <div class="images-grid">
      <img 
        *ngFor="let image of calangoImages"
        [src]="image"
        class="selectable-image"
        (click)="selectImage(image)"
      />
    </div>
    
    <button class="close-button" (click)="closeModal()">Fechar</button>
  </div>
</div>
